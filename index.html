<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Approaches to Achieving HTTPS in Local Network</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in Â§N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version db559f98d6c99655936abc96647a0e88ba98a9cf" name="generator">
  <link href="https://httpslocal.github.io/proposals/" rel="canonical">
  <meta content="97df74b059da3cb94a53d845ea0a1491394e35dc" name="document-revision">
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "Â¶"; }
.heading > a.self-link::before { content: "Â§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "â";
}
.css::after, .property::after, .descriptor::after {
    content: "â";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "â";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "â";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-dfn-panel */

.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: #DDDDDD;
    color: black;
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-syntax-highlighting */

.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Approaches to Achieving HTTPS in Local Network</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2019-09-19">19 September 2019</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://httpslocal.github.io/proposals/">https://httpslocal.github.io/proposals/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/httpslocal/proposals/issues/">GitHub</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://github.com/httpslocal/proposals/graphs/contributors">Contributors on GitHub</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> Â© 2019 the Contributors to the Approaches to Achieving HTTPS in Local Network Specification, published by the <a href="https://www.w3.org/community/httpslocal/">HTTPS in Local Network Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document describes technical approaches for browsers to communicate with HTTPS servers in local network.

    All of the approaches in this document are not feasible on existing web standards for
    the browser and/or related communication protocols and systems. Therefore, this document
    describes not only the explanation of each approach itself but also related requirements for the browser,
    and required standardization activities on the communication protocols and systems.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/httpslocal/">HTTPS in Local Network Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#terminology"><span class="secno">2</span> <span class="content">Terminology</span></a>
    <li>
     <a href="#scope"><span class="secno">3</span> <span class="content">Scope</span></a>
     <ol class="toc">
      <li><a href="#target-devices"><span class="secno">3.1</span> <span class="content">Target <span>Devices</span></span></a>
      <li><a href="#target-local-networks"><span class="secno">3.2</span> <span class="content">Target Local Networks</span></a>
      <li><a href="#target-access-patterns"><span class="secno">3.3</span> <span class="content">Target Access Patterns</span></a>
     </ol>
    <li>
     <a href="#existing-solutions"><span class="secno">4</span> <span class="content">Existing Solutions</span></a>
     <ol class="toc">
      <li><a href="#existing-sol-1"><span class="secno">4.1</span> <span class="content">Web PKI based Solutions</span></a>
      <li><a href="#existing-sol-2"><span class="secno">4.2</span> <span class="content">Non-Web PKI based Solutions</span></a>
     </ol>
    <li>
     <a href="#technical-approaches"><span class="secno">5</span> <span class="content">Technical Approaches</span></a>
     <ol class="toc">
      <li>
       <a href="#web-pki-approaches"><span class="secno">5.1</span> <span class="content">Web PKI based Approaches</span></a>
       <ol class="toc">
        <li>
         <a href="#approach-1"><span class="secno">5.1.1</span> <span class="content">APPROACH-1: Using technically Constrained Certificates</span></a>
         <ol class="toc">
          <li><a href="#dependency-1"><span class="secno">5.1.1.1</span> <span class="content">Dependency on other SDOs</span></a>
         </ol>
       </ol>
      <li>
       <a href="#non-web-pki-approaches"><span class="secno">5.2</span> <span class="content">Non-Web PKI based Approaches</span></a>
       <ol class="toc">
        <li>
         <a href="#approach-2"><span class="secno">5.2.1</span> <span class="content">APPROACH-2: Using Shared Secret</span></a>
         <ol class="toc">
          <li><a href="#approach-2-flow"><span class="secno">5.2.1.1</span> <span class="content">Device Access Flow</span></a>
          <li><a href="#approach-2-skip-user-consent"><span class="secno">5.2.1.2</span> <span class="content">Skipping user consent</span></a>
          <li><a href="#requirements-2"><span class="secno">5.2.1.3</span> <span class="content">Browser Requirements</span></a>
          <li><a href="#dependency-2"><span class="secno">5.2.1.4</span> <span class="content">Dependency on other SDOs</span></a>
         </ol>
        <li>
         <a href="#approach-3"><span class="secno">5.2.2</span> <span class="content">APPROACH-3: Using Application Layer Access Token</span></a>
         <ol class="toc">
          <li><a href="#approach-3-flow-1"><span class="secno">5.2.2.1</span> <span class="content">Device Setup Flow</span></a>
          <li><a href="#approach-3-flow-2"><span class="secno">5.2.2.2</span> <span class="content">Device Access Flow</span></a>
          <li><a href="#requirements-3"><span class="secno">5.2.2.3</span> <span class="content">Browser Requirements</span></a>
          <li><a href="#dependency-3"><span class="secno">5.2.2.4</span> <span class="content">Dependency on other SDOs</span></a>
         </ol>
        <li>
         <a href="#approach-4"><span class="secno">5.2.3</span> <span class="content">APPROACH-4: Using Device Authority-Issued Certificate</span></a>
         <ol class="toc">
          <li><a href="#requirements-4"><span class="secno">5.2.3.1</span> <span class="content">Browser Requirements</span></a>
          <li><a href="#dependency-4"><span class="secno">5.2.3.2</span> <span class="content">Dependency on other SDOs</span></a>
         </ol>
       </ol>
      <li>
       <a href="#pros-cons"><span class="secno">5.3</span> <span class="content">Pros and Cons of the Approaches</span></a>
       <ol class="toc">
        <li><a href="#proscons-1"><span class="secno">5.3.1</span> <span class="content">APPROACH-1</span></a>
        <li><a href="#proscons-2"><span class="secno">5.3.2</span> <span class="content">APPROACH-2</span></a>
        <li><a href="#proscons-3"><span class="secno">5.3.3</span> <span class="content">APPROACH-3</span></a>
        <li><a href="#proscons-4"><span class="secno">5.3.4</span> <span class="content">APPROACH-4</span></a>
       </ol>
     </ol>
    <li><a href="#conclusion"><span class="secno">6</span> <span class="content">Conclusion</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>By tradition, diverse kinds of connected devices have HTTP server functionality
to provide their users with web-based UIs. Since such kind of devices in local network
cannot easily get valid server certificates, most of the devices have to use non-secure HTTP.</p>
   <p>On the other hand, recently, using HTTPS is getting popular rapidly on the internet
due to various efforts to make the internet secure, such as <a data-link-type="biblio" href="#biblio-lets-encrypt">[LETS-ENCRYPT]</a>.
Following the trend, browsers' security policies have been enhanced gradually to deprecate insecure HTTP.
For example, new features on browsers are supposed to be restricted only to <a data-link-type="biblio" href="#biblio-secure-contexts">[SECURE-CONTEXTS]</a>.</p>
   <p>As the result, browsers came to show negative security indicators when the devices are
accessed by their users. Browsers also prevent web applications in secure contexts
from accessing and collaborating with the devices. In addition, the devices cannot use
powerful features (<a data-link-type="biblio" href="#biblio-secure-contexts">[SECURE-CONTEXTS]</a>) on their web-based UIs.
The local devices have been marginalized in the current secure web.</p>
   <p>In this document, we propose comprehensive technical approaches to address the problem
on using HTTPS in local network. All of the approaches in this document are
not feasible on existing web standards for the browser and/or related communication
protocols and systems. Therefore, this document describes not only the explanation
of each approach itself but also related requirements for the browser,
and required standardization activities on the communication protocols and systems.</p>
   <p>The purpose of this document is to initiate discussions and receive feedbacks
from the W3C members especially from the browser vendors and web developers.
Authors of this document are aware that the proposed approaches might not be based
on the current design and security policies of the browser implementations
but certainly hope that the community will update these policies to cater
the need for new emerging markets, such as Internet of Things (IoT).</p>
   <h2 class="heading settled" data-level="2" id="terminology"><span class="secno">2. </span><span class="content">Terminology</span><a class="self-link" href="#terminology"></a></h2>
   <p>In this document, we refer to <strong>HTTPS</strong> as a scheme of communication allowed by the <a data-link-type="dfn" href="#ua" id="ref-for-ua">UA</a> which uses TLS as a method for ensuring confidentiality of its content and identification/authentication
of the counterpart of the communication. This means, the scope of the term HTTPS in this document
is not limited to the <code>https://</code> scheme but also includes WebSocket over TLS (<code>wss://</code>) and other
schemes that operate in a similar way. Whenever there is a need to disambiguate so that the term
specifies the <code>https://</code> scheme only, the document will indicate so.</p>
   <p>In addtion, this document uses the following terms as defined here:</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-network">local network</dfn> is a network defined in <a href="#target-local-networks">Â§3.2 Target Local Networks</a></p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ua">UA</dfn> (User Agent) is a browser on a userâs PC, smartphone, tablet
and so on, which is connected to a <a data-link-type="dfn" href="#local-network" id="ref-for-local-network">local network</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="device">device</dfn> is in the same <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ ">local network</a> as the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ ">UA</a>, capable of HTTPS server.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="web-service">web service</dfn> is a service hosted on the internet and whose frontend is
loaded on the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¡">UA</a>, which accesses to the <a data-link-type="dfn" href="#device" id="ref-for-device">device</a> with HTTPS on the <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ¡">local network</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="web-pki-certificate">Web PKI certificate</dfn> is a TLS server certificate that can chain up to
a root CA (Certificate Authority) trusted by the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¢">UA</a> (preinstalled on the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ£">UA</a>).</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="non-web-pki-certificate">non-Web PKI certificate</dfn> is a TLS server certificate that cannot chain
up to a root CA, or a self-signed certificate.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="public-ca">public CA</dfn> is a CA responsible for issuing the <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate">Web PKI certificates</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="private-ca">private CA</dfn> is a CA responsible for issuing the <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate">non-Web PKI certificates</a>.</p>
   <h2 class="heading settled" data-level="3" id="scope"><span class="secno">3. </span><span class="content">Scope</span><a class="self-link" href="#scope"></a></h2>
   <p>The approaches proposed in <a href="#technical-approaches">Â§5 Technical Approaches</a> are based on the use cases
and the requirements defined in <a data-link-type="biblio" href="#biblio-httpslocal-usecases">[HTTPSLOCAL-USECASES]</a>.</p>
   <h3 class="heading settled" data-level="3.1" id="target-devices"><span class="secno">3.1. </span><span class="content">Target <a data-link-type="dfn" href="#device" id="ref-for-deviceâ ">Devices</a></span><a class="self-link" href="#target-devices"></a></h3>
   <p>To focus on the problem on using HTTPS in <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ¢">local network</a>, approaches for publicly
accessbile <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡">devices</a> are out of scope. Actually, it is easy for such kind of devices
to get <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ ">Web PKI certificates</a> so there are few technical challenges on browser
implementations and related standardization activities. Therefore, this document
does not contain the approaches for the publicly accessible <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢">devices</a> as <a href="#technical-approaches">Â§5 Technical Approaches</a> but as <a href="#existing-solutions">Â§4 Existing Solutions</a>.</p>
   <h3 class="heading settled" data-level="3.2" id="target-local-networks"><span class="secno">3.2. </span><span class="content">Target Local Networks</span><a class="self-link" href="#target-local-networks"></a></h3>
   <p>Based on <a data-link-type="biblio" href="#biblio-httpslocal-usecases">[HTTPSLOCAL-USECASES]</a>, we regard following types of network as <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ£">local network</a>:</p>
   <ul>
    <li data-md>
     <p>home network</p>
     <ul>
      <li data-md>
       <p>Related use cases: <a data-link-type="biblio" href="#biblio-uc-1">[UC-1]</a>, <a data-link-type="biblio" href="#biblio-uc-2">[UC-2]</a>, <a data-link-type="biblio" href="#biblio-uc-3">[UC-3]</a>, <a data-link-type="biblio" href="#biblio-uc-6">[UC-6]</a>, <a data-link-type="biblio" href="#biblio-uc-7">[UC-7]</a></p>
     </ul>
    <li data-md>
     <p>intra-company network (includes factory network, building network, etc.)</p>
     <ul>
      <li data-md>
       <p>Related use cases: <a data-link-type="biblio" href="#biblio-uc-5">[UC-5]</a>, <a data-link-type="biblio" href="#biblio-uc-8">[UC-8]</a></p>
     </ul>
    <li data-md>
     <p>intra-machine(intra-<a data-link-type="dfn" href="#ua" id="ref-for-uaâ¤">UA</a>) network (uses loopback addresses, etc.)</p>
     <ul>
      <li data-md>
       <p>Related use cases: <a data-link-type="biblio" href="#biblio-uc-4">[UC-4]</a></p>
     </ul>
   </ul>
   <p>In aspect of IP address spaces, <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ¤">local networks</a> in this document can be defined as the networks
that use following address spaces or prefixes:</p>
   <ul>
    <li data-md>
     <p>IPv4 private address space defined in <a data-link-type="biblio" href="#biblio-rfc1918">[RFC1918]</a>.</p>
    <li data-md>
     <p>IPv4 link-local space defined in <a data-link-type="biblio" href="#biblio-rfc3927">[RFC3927]</a>.</p>
    <li data-md>
     <p>IPv4 loopback space defined in <a data-link-type="biblio" href="#biblio-rfc1122">[RFC1122]</a>.</p>
    <li data-md>
     <p>IPv6 unique local address prefix defined in <a data-link-type="biblio" href="#biblio-rfc4193">[RFC4193]</a>.</p>
    <li data-md>
     <p>IPv6 link-local prefix defined in <a data-link-type="biblio" href="#biblio-rfc4191">[RFC4191]</a>.</p>
    <li data-md>
     <p>IPv6 loopback address defined in <a data-link-type="biblio" href="#biblio-rfc4191">[RFC4191]</a>.</p>
   </ul>
   <h3 class="heading settled" data-level="3.3" id="target-access-patterns"><span class="secno">3.3. </span><span class="content">Target Access Patterns</span><a class="self-link" href="#target-access-patterns"></a></h3>
   <p>In general, we can categorize the use cases listed in <a data-link-type="biblio" href="#biblio-httpslocal-usecases">[HTTPSLOCAL-USECASES]</a> into two <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£">device</a> access patterns principle for local HTTPS.
They are as follows:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="normal-access-pattern">Normal access pattern</dfn>: the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤">device</a> has web contents and a user types the address of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥">device</a> (e.g., <code>https://device.local</code>) on the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¥">UA</a> directly and receives the contents.</p>
     <ul>
      <li data-md>
       <p>Related use cases: <a data-link-type="biblio" href="#biblio-uc-6">[UC-6]</a></p>
     </ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cross-origin-access-pattern">Cross-origin access pattern</dfn>: the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦">device</a> has API endpoints and a web frontend loaded
on a <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¦">UA</a> from the internet (hereafter, simply called âweb serviceâ) accesses the APIs
with a browser API (e.g., <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a>) and receives the contents.</p>
     <ul>
      <li data-md>
       <p>Related use cases: <a data-link-type="biblio" href="#biblio-uc-1">[UC-1]</a>, <a data-link-type="biblio" href="#biblio-uc-2">[UC-2]</a>, <a data-link-type="biblio" href="#biblio-uc-3">[UC-3]</a>, <a data-link-type="biblio" href="#biblio-uc-4">[UC-4]</a>, <a data-link-type="biblio" href="#biblio-uc-5">[UC-5]</a>, <a data-link-type="biblio" href="#biblio-uc-6">[UC-6]</a>, <a data-link-type="biblio" href="#biblio-uc-7">[UC-7]</a>, <a data-link-type="biblio" href="#biblio-uc-8">[UC-8]</a></p>
     </ul>
   </ul>
   <p>All approaches proposed in this document are based on either one or both of the access patterns.</p>
   <h2 class="heading settled" data-level="4" id="existing-solutions"><span class="secno">4. </span><span class="content">Existing Solutions</span><a class="self-link" href="#existing-solutions"></a></h2>
   <p>Before providing the list of the technical approaches, weâd like to walk through existing solutions.</p>
   <h3 class="heading settled" data-level="4.1" id="existing-sol-1"><span class="secno">4.1. </span><span class="content">Web PKI based Solutions</span><a class="self-link" href="#existing-sol-1"></a></h3>
   <p>When a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ§">device</a> is publicly accessible, the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¨">device</a> can get a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ¡">Web PKI certificate</a> from a <a data-link-type="dfn" href="#public-ca" id="ref-for-public-ca">public CA</a> and use it on HTTPS communications with <a data-link-type="dfn" href="#ua" id="ref-for-uaâ§">UAs</a>.
However, in this case, the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ âª">device</a>'s domain name must be globally unique (e.g., <code>device-id.device-vendor.com</code>)
because <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ ">public CA</a> cannot issue certificates for local domains
such as <code>.local</code>(<a data-link-type="biblio" href="#biblio-rfc6762">[RFC6762]</a>) or <code>.home.arpa</code> (<a data-link-type="biblio" href="#biblio-rfc8375">[RFC8375]</a>)
as described in <a data-link-type="biblio" href="#biblio-cabforum-guidance-deprecated-internal-names">[CABFORUM-GUIDANCE-DEPRECATED-INTERNAL-NAMES]</a>.</p>
   <p>Example current industry best practices of this solution are Mozillaâs <a data-link-type="biblio" href="#biblio-webthings-gateway">[WEBTHINGS-GATEWAY]</a> and <a data-link-type="biblio" href="#biblio-plex">[PLEX]</a>.</p>
   <p>While these solutions are deployed and fits well in some use cases,
they cannot work in scenarios where domains are for example, <code>device.local</code> or <code>device.home.arpa</code>.
Moreover, the access to local <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â ">devices</a> in the first place is an important issue
(we understand that this issue can be mitigated by preconfiguring the gateway
router/proxy but these settings are difficult to be made available in scenarios
such as home networks).
The other issue is resolving the domain name when there is no internet access.
Finally, the number of required <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¡">public CAs</a> is significantly
larger than other use cases due to the vast nature of IoT devices.</p>
   <h3 class="heading settled" data-level="4.2" id="existing-sol-2"><span class="secno">4.2. </span><span class="content">Non-Web PKI based Solutions</span><a class="self-link" href="#existing-sol-2"></a></h3>
   <p>Installing <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificateâ ">non-Web PKI certificates</a> (e.g., self-signed certificates) into a <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¨">UA</a> as a trusted one manually is a widely used solution.
Manually installing <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificateâ¡">non-Web PKI certificates</a> (e.g., self-signed certificates) onto a <a data-link-type="dfn" href="#ua" id="ref-for-uaâ âª">UA</a> as a trusted certificate is a widely used solution.
However, manual operation can make it prone to user error.</p>
   <h2 class="heading settled" data-level="5" id="technical-approaches"><span class="secno">5. </span><span class="content">Technical Approaches</span><a class="self-link" href="#technical-approaches"></a></h2>
   <p>In this section, we describe technical approaches for using HTTPS in <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ¥">local network</a> except for using normal <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ¢">Web PKI certificates</a>, and complicated (and maybe dangerous)
manual operations referred in <a href="#existing-solutions">Â§4 Existing Solutions</a>.</p>
   <p>Each approach defined in the following sections is categorized
based on the first class requirement, <a data-link-type="biblio" href="#biblio-req-1">[REQ-1]</a>: Guarantee of Device Trustworthiness.</p>
   <h3 class="heading settled" data-level="5.1" id="web-pki-approaches"><span class="secno">5.1. </span><span class="content">Web PKI based Approaches</span><a class="self-link" href="#web-pki-approaches"></a></h3>
   <h4 class="heading settled" data-level="5.1.1" id="approach-1"><span class="secno">5.1.1. </span><span class="content">APPROACH-1: Using technically Constrained Certificates</span><a class="self-link" href="#approach-1"></a></h4>
   <p>This sectionâs description is written for <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ£">Web PKI certificates</a> with Server-auth Extended Key Usage.</p>
   <p><a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¢">Public CAs</a> need to verify the DNS name of a certificate at the time of issuance of <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ¤">Web PKI certificates</a> with Server-auth Extended Key Usage,
following CA/BForum Baseline Requirement <a data-link-type="biblio" href="#biblio-cab-br">[CAB-BR]</a>.
However, a <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ£">public CA</a> cannot verify a local networkâs local IP address.
So <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¤">public CAs</a> cannot generally issue certificates for <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¡">devices</a>, barring an exception, which is technically constrained certificates.</p>
   <p><strong>Technically constrained intermediate CA</strong></p>
   <p>The term "technically constrained intermediate CA" in CABForumâs baseline Requirement might be confusing.
There is a term "technically constrained" in the <a data-link-type="biblio" href="#biblio-cab-br">[CAB-BR]</a>,
and "name constraint" is one of requirements for Certificates with "EKU = server-auth" to be "technically constrained"
If EE (End Entity) certificates will be technically constrained, issuing <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¥">public CA</a> do not need to verify the DNS name at the time of issuance,
and that <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¦">public CA</a> can publish certificates for <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¢">devices</a>.</p>
   <p>Name constraints seem to working well in many browsers now <a data-link-type="biblio" href="#biblio-better-tls">[BETTER-TLS]</a>.
The mechanism of name constraint is well explained by Netflix <a data-link-type="biblio" href="#biblio-better-tls">[BETTER-TLS]</a>,
so we briefly explain how it works in the next paragraph.</p>
   <p><strong>How technically constrained intermediate CA issues Web PKI certificates</strong></p>
   <p>We assume that the device vendor has to have control over ".camera.example.com," for example.</p>
   <div align="center"> <img src="figs/fig_sol_1_1.png" width="360px"> </div>
   <p>A <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ§">public CA</a> validates the device vendorâs control over .camera.example.com,
and issues a name-constraint intermediate CA cert.
That intermediate CA is technically constrained, and only able to issue valid certificates with .camera.example.com .
Since the vendor is controlling .camera.example.com and .camera.example.com has been validated,
validation of "device1.camera.example.com" can be skipped at that time, and that <a data-link-type="dfn" href="#public-ca" id="ref-for-public-caâ¨">public CA</a> would able to issue an EE certificate for device1.camera.example.com.
After transporting that certificate to a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â£">device</a> somehow, that <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¤">device</a> can use a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificateâ¥">Web PKI certificate</a>.</p>
   <p><strong>Possible use case</strong></p>
   <div align="center"> <img src="figs/fig_sol_1_2.png" width="720px"> </div>
   <p>Here, we assume the DNS server of ".camera.example.com" has a record of <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¥">device</a> and
its local IP(e.g 192.168.2.100) with some mechanism (1).
So, that DNS server can reply with local IP address.
The browser can then get the IP address of <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¦">device</a> (right hand side solid triangle lines).</p>
   <p>Then browser can have TLS connection with the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â§">device</a>, which has a local ipaddress.
The device vendor needs to maintain the security of the ".camera.example.com" network.</p>
   <h5 class="heading settled" data-level="5.1.1.1" id="dependency-1"><span class="secno">5.1.1.1. </span><span class="content">Dependency on other SDOs</span><a class="self-link" href="#dependency-1"></a></h5>
    This solution will require work with device venders as follows: 
   <ul>
    <li data-md>
     <p>Mechanism to install EE certs onto <a data-link-type="dfn" href="#device" id="ref-for-deviceâ â¨">devices</a> and update them at least once every other year<a data-link-type="biblio" href="#biblio-cab-br">[CAB-BR]</a>.</p>
    <li data-md>
     <p>Attestation mechanism to confirm that the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡âª">devices</a> are a product of a specific device vender.</p>
    <li data-md>
     <p>Revocation mechanism for <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â ">devices</a> with unauthorized modification</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="non-web-pki-approaches"><span class="secno">5.2. </span><span class="content">Non-Web PKI based Approaches</span><a class="self-link" href="#non-web-pki-approaches"></a></h3>
   <p>In this section, we describe three technical approaches for communications
between a <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â ">UA</a> and a local server that has private domain names.</p>
   <p class="note" role="note"><span>NOTE:</span> For the following discussions, we use <code>device.local</code> as an example of
a domain name of a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¡">device</a>. Of course, other local domain names (e.g., <code>device.home.arpa</code>)
are applicable name which can be resolved but the name resolution methods
should not be restricted only to mDNS (<a data-link-type="biblio" href="#biblio-rfc6762">[RFC6762]</a>).</p>
   <h4 class="heading settled" data-level="5.2.1" id="approach-2"><span class="secno">5.2.1. </span><span class="content">APPROACH-2: Using Shared Secret</span><a class="self-link" href="#approach-2"></a></h4>
   <p>This approach is based on the user grant and the use of shared password in
which PAKE (e.g., <a data-link-type="biblio" href="#biblio-spake2">[SPAKE2]</a>, dragonfly <a data-link-type="biblio" href="#biblio-rfc7664">[RFC7664]</a>, J-PAKE <a data-link-type="biblio" href="#biblio-rfc8236">[RFC8236]</a>) is used for the establishment of
a TLS session between the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¡">UA</a> and the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¢">device</a>.</p>
   <p class="note" role="note"><span>NOTE:</span> It is worthwhile to mention that J-PAKE has already been implemented in <a data-link-type="biblio" href="#biblio-mbed-tls">[MBED-TLS]</a> and the use of <a data-link-type="biblio" href="#biblio-spake2">[SPAKE2]</a> has been discussed in <a data-link-type="biblio" href="#biblio-w3c-second-screen-wg">[W3C-SECOND-SCREEN-WG]</a>.</p>
   <h5 class="heading settled" data-level="5.2.1.1" id="approach-2-flow"><span class="secno">5.2.1.1. </span><span class="content">Device Access Flow</span><a class="self-link" href="#approach-2-flow"></a></h5>
   <p>This approach can be realized on both of the access patterns mentioned in <a href="#target-access-patterns">Â§3.3 Target Access Patterns</a>.</p>
   <p><strong>Normal Access Pattern</strong></p>
   <ol>
    <li data-md>
     <p>When a user inputs a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â£">device</a> URL (<code>https://device.local</code>) to the address bar of the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¢">UA</a> directly,
the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â£">UA</a> allows the access only if the user grants the access through the UI shown in the figure below.</p>
     <div align="center"> <img src="figs/fig_sol_2_1.png" width="480px"> </div>
    <li data-md>
     <p>The UI will be displayed when the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¤">device</a> URL has local domain name and the underlying TLS handshake
detects the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¥">device</a> supports a PAKE-based cipher suite (e.g., <a data-link-type="biblio" href="#biblio-spake2">[SPAKE2]</a>, <a data-link-type="biblio" href="#biblio-rfc8492">[RFC8492]</a>, <a data-link-type="biblio" href="#biblio-ec-jpake">[EC-JPAKE]</a>, <a data-link-type="biblio" href="#biblio-pake-with-tls13">[PAKE-WITH-TLS1.3]</a>).</p>
    <li data-md>
     <p>To make sure that the <code>device.local</code> displayed on the pop-up window is really
the same as the domain name of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¦">device</a> which the user intends to grant the access to,
user inserts either a PIN or password through the pop-up window.</p>
    <li data-md>
     <p>When the PIN or password is correct, the TLS handshake will be completed successfully and the user can
get a web UI of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â§">device</a> without any negative security indicators.</p>
   </ol>
   <p>The above flow can be achieved by extending the UI with adding the cipher suites in the browser.
This will enable binding the displayed domain name to the physical device.</p>
   <p><strong>Cross-Origin Access Pattern</strong></p>
   <ol>
    <li data-md>
     <p>When a <a data-link-type="dfn" href="#web-service" id="ref-for-web-service">web service</a> (e.g., <code>https://device-user.example.com</code>) accesses the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¡â¨">device</a> via the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¤">UA</a>.
The <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¥">UA</a> allows the access only if the user grants the access through the UI shown in the figure below.</p>
     <div align="center"> <img src="figs/fig_sol_2_2.png" width="480px"> </div>
    <li data-md>
     <p>The UI will be displayed when the underlying <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API is called for the access to the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢âª">device</a> that
has a private domain name and successfully performs a TLS handshake using a PAKE-based cipher suite.</p>
    <li data-md>
     <p>Subsequent flow is the same as the <a data-link-type="dfn" href="#normal-access-pattern" id="ref-for-normal-access-pattern">normal access pattern</a> described above.</p>
   </ol>
   <p>As with the <a data-link-type="dfn" href="#normal-access-pattern" id="ref-for-normal-access-patternâ ">normal access pattern</a> flow mentioned above, this flow can be achieved by extending
the UI with adding the PAKE-based cipher suites in the browser.</p>
   <h5 class="heading settled" data-level="5.2.1.2" id="approach-2-skip-user-consent"><span class="secno">5.2.1.2. </span><span class="content">Skipping user consent</span><a class="self-link" href="#approach-2-skip-user-consent"></a></h5>
   <p>This approach might have to have a way to mitigate the PIN or password entry for subsequent TLS sessions,
or the user has to input it every time the user uses the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â ">device</a>.</p>
   <p>To skip user consent, a specific method on how to bind the ununique private domain name (<code>device.local</code>)
to the TLS session established by using PAKE needs to be defined to distinguish <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¡">devices</a> which have the same names
as mentioned in <a data-link-type="biblio" href="#biblio-https-for-local-domains">[HTTPS-FOR-LOCAL-DOMAINS]</a>.</p>
   <p>As for this PAKE-based approach, for example, using device âprivate domain name + fingerprint in self-signed certificateâ
as the TLS server identifier (which is defined in <a data-link-type="biblio" href="#biblio-ec-jpake">[EC-JPAKE]</a> can be considered as one of the candidate approaches.
The use of self-signed certificate after the first PAKE based TLS session needs to be defined as well.</p>
   <p>To skip user consent on the <a data-link-type="dfn" href="#normal-access-pattern" id="ref-for-normal-access-patternâ¡">normal access pattern</a>, the browser has to manage the addtional element (e.g., fingerprint
in the self-signed certificate) in context with the origin of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¢">device</a> internally.</p>
   <p>On the other hand, as for the <a data-link-type="dfn" href="#cross-origin-access-pattern" id="ref-for-cross-origin-access-pattern">cross-origin access pattern</a>, <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a>] API might have to have a way to return the fingerprint
in the self-signed certficate provided by the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â£">device</a> as the result of the TLS handshake with the PAKE-based cipher suite,
and also have a way to use the fingerprint as demonstrated below.</p>
   <div class="example" id="example-d5772043">
    <a class="self-link" href="#example-d5772043"></a> The following code is an example of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API extension to support this approach. 
<pre class="highlight">fetch<c- p>(</c-><c- u>"https://device.local/stuff"</c-><c- p>,</c-> <c- p>{</c->
  <c- c1>// The following extension might be available only to private domain names.</c->
  tlsExtension<c- o>:</c-> <c- p>{</c->
    <c- c1>// type of the TLS extension.</c->
    type<c- o>:</c-> <c- u>"pake"</c-><c- p>,</c->
    <c- c1>// base64-encoded SPKI of the certificate or its fingerprint.</c->
    <c- c1>//     this is an optional argument for subsequent TLS sessions</c->
    <c- c1>//     to identify the local server and to omit user approval.</c->
    pinnedIdentity<c- o>:</c-> <c- u>"8fwpbctkMAq2x73orFsOXMruxWnmFSyhXioQmclhJ5L="</c-><c- p>}});</c->
</pre>
   </div>
   <h5 class="heading settled" data-level="5.2.1.3" id="requirements-2"><span class="secno">5.2.1.3. </span><span class="content">Browser Requirements</span><a class="self-link" href="#requirements-2"></a></h5>
   <p>The requirements for browsers can be summarized as follows:</p>
   <ul>
    <li data-md>
     <p>Support additional cipher suites for PAKE (e.g., <a data-link-type="biblio" href="#biblio-spake2">[SPAKE2]</a>, <a data-link-type="biblio" href="#biblio-rfc8492">[RFC8492]</a>, <a data-link-type="biblio" href="#biblio-ec-jpake">[EC-JPAKE]</a>, <a data-link-type="biblio" href="#biblio-pake-with-tls13">[PAKE-WITH-TLS1.3]</a>).</p>
    <li data-md>
     <p>Implement the pop-up window for PIN/Password input.</p>
    <li data-md>
     <p>Support a method to distinguish <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¤">devices</a> which have the same names.</p>
    <li data-md>
     <p>Extend <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API to support the method to distinguish <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¥">devices</a> as demonstrated in this section.</p>
    <li data-md>
     <p>Support a method to use a self-signed certificate after the first PAKE-based TLS session to skip user consent every time the TLS handshake happens.</p>
   </ul>
   <h5 class="heading settled" data-level="5.2.1.4" id="dependency-2"><span class="secno">5.2.1.4. </span><span class="content">Dependency on other SDOs</span><a class="self-link" href="#dependency-2"></a></h5>
   <p>This approach will require work and collaboration with the IETF.</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-spake2">[SPAKE2]</a>, <a data-link-type="biblio" href="#biblio-ec-jpake">[EC-JPAKE]</a> and <a data-link-type="biblio" href="#biblio-pake-with-tls13">[PAKE-WITH-TLS1.3]</a> were individual submissions and they are currently expired.
If W3C embraces this approach, the work needs to resumed and completed.</p>
    <li data-md>
     <p>A method to bind a private domain name to a PAKE-based TLS session needs to be specified and standardized.</p>
   </ul>
   <h4 class="heading settled" data-level="5.2.2" id="approach-3"><span class="secno">5.2.2. </span><span class="content">APPROACH-3: Using Application Layer Access Token</span><a class="self-link" href="#approach-3"></a></h4>
   <p>In <a href="#approach-2">Â§5.2.1 APPROACH-2: Using Shared Secret</a>, there is no trust anchor that can guarantee the authenticity of <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¦">devices</a> and it is difficult for users to find whether the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â§">device</a> is a legitimate one.
From the standpoint of <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ ">web services</a>, it is often argued whether a server authentication
should be delegated to a userâs judgement.</p>
   <p>This approach resolves the problem by introducing an <a data-link-type="biblio" href="#biblio-ietf-ace-wg">[IETF-ACE-WG]</a> and <a data-link-type="biblio" href="#biblio-ietf-oauth-wg">[IETF-OAUTH-WG]</a> based
AS (Authorization Server) as an authority of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¢â¨">device</a> into the local HTTPS system as shown below.</p>
   <div align="center"> <img src="figs/fig_sol_3_1.png" width="480px"> </div>
   <p>The ACE components have the following relationships:</p>
   <ul>
    <li data-md>
     <p>The device, which is regarded as an RS (Resource Server) in the context of ACE,
has a trust relationship with the AS. In our assumption,
the AS is configured by the device manufacturer.</p>
    <li data-md>
     <p>The web server, which is regarded as a client in the context of ACE,
has been registered to the AS in advance and has a trust relationship with it.</p>
    <li data-md>
     <p>The user, which is regarded as a Resource Owner in the context of ACE,
has an account for the AS and the ownership information to <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£âª">device</a> has been
registered to the AS in advance.</p>
   </ul>
   <p>Under the above relationships, HTTPS communications from the client (<a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¡">web service</a>) to the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â ">device</a> can be achieved based on the following flows.</p>
   <h5 class="heading settled" data-level="5.2.2.1" id="approach-3-flow-1"><span class="secno">5.2.2.1. </span><span class="content">Device Setup Flow</span><a class="self-link" href="#approach-3-flow-1"></a></h5>
   <p>Before the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¢">web service</a> accesses the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¡">device</a>, the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¢">device</a> registers itself to the AS in some way.
For example, the registration flow might be as follows:</p>
   <ol>
    <li data-md>
     <p>As a precondition, the AS issues an attestation key and installs it into the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â£">device</a> on the manufacturing process.</p>
    <li data-md>
     <p>As a bootstrapping step, using the attestation key as a signing key, the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¤">device</a> creates
a RPK (Raw Public Key)(<a data-link-type="biblio" href="#biblio-rfc7250">[RFC7250]</a>) or a certificate signded by the attestation key.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¥">device</a> sends the RPK or the certificate to the AS.</p>
    <li data-md>
     <p>The AS validates the signature by using the attestation key and registers the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¦">device</a> as a trusted one if the validation succeeds.</p>
   </ol>
   <p>In addition, when the trust relationship between the AS and the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â§">devices</a> is built on attestation
keys in TPM (Trusted Platform Module) on the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ£â¨">devices</a>, the authenticity of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤âª">devices</a> can
be enhanced. The use of the attestation keys is applicable to <a href="#approach-4">Â§5.2.3 APPROACH-4: Using Device Authority-Issued Certificate</a> as well.</p>
   <h5 class="heading settled" data-level="5.2.2.2" id="approach-3-flow-2"><span class="secno">5.2.2.2. </span><span class="content">Device Access Flow</span><a class="self-link" href="#approach-3-flow-2"></a></h5>
   <p>This approach can apparently support only the <a data-link-type="dfn" href="#cross-origin-access-pattern" id="ref-for-cross-origin-access-patternâ ">cross-origin access pattern</a> because the accessor to the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â ">device</a> is an ACE or OAuth client.
Therefore, we describes the device access flow only for the <a data-link-type="dfn" href="#cross-origin-access-pattern" id="ref-for-cross-origin-access-patternâ¡">cross-origin access pattern</a>.</p>
   <p><strong>Cross-Origin Access Pattern</strong></p>
   <ol>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ£">web service</a> can get an access token to access the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¡">device</a> based on userâs approval.
At this time, the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¤">web service</a> can also get the RS information that includes an URI and
an RPK or self-signed certificate of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¢">device</a> (step (B) as shown in above figure).</p>
    <li data-md>
     <p>Since the existing browsers do not permit the access to the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â£">device</a> with the access token (step (C) in above figure),
browser API and related UI need to be extended to enable the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¥">web service</a> to access the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¤">device</a> only when the client provides the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¦">UA</a> with the RS information (a self-signed certificate or RPK)
as a trusted one.</p>
    <li data-md>
     <p>The RS information can be sent to the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â§">UA</a> as an extended parameter of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API as follows:</p>
     <div class="example" id="example-1815c064">
      <a class="self-link" href="#example-1815c064"></a> The following code is an example of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API extension to support this approach. 
<pre class="highlight"><c- c1>// When RS Information includes a RPK,</c->
fetch<c- p>(</c-><c- u>"https://device.local/stuff"</c-><c- p>,</c-> <c- p>{</c->
  tlsExtension<c- o>:</c-> <c- p>{</c->
    <c- c1>// type of the TLS extension.</c->
    type<c- o>:</c-> <c- u>"rpk"</c-><c- p>,</c->
    <c- c1>// a base64-encoded raw public key or its fingerprint.</c->
    pinnedIdentity<c- o>:</c-> <c- u>"8fwpbctkMAq2x73orFsOXMruxWnmFSyhXioQmclhJ5L="</c-><c- p>}});</c->

<c- c1>// When RS Informatin includes a self-signed certificate,</c->
fetch<c- p>(</c-><c- u>"https://device.local/stuff"</c-><c- p>,</c-> <c- p>{</c->
  tlsExtension<c- o>:</c-> <c- p>{</c->
    <c- c1>// type of the TLS extension.</c->
    <c- c1>//     'pkix' might be a default value that can be omitted.</c->
    type<c- o>:</c-> <c- u>"pkix"</c-><c- p>,</c->
    <c- c1>// a base64-encoded SPKI of the certificate or its fingerprint</c->
    pinnedIdentity<c- o>:</c-> <c- u>"8fwpbctkMAq2x73orFsOXMruxWnmFSyhXioQmclhJ5L="</c-><c- p>}});</c->
</pre>
     </div>
    <li data-md>
     <p>When the <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API above is called, the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ â¨">UA</a> shows a following pop-up window.</p>
     <div align="center"> <img src="figs/fig_sol_3_2.png" width="480px"> </div>
    <li data-md>
     <p>As the result, HTTPS accesses from the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¦">web service</a> to the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¥">device</a> are achieved
by the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¡âª">UA</a> based on the trust relationship between the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ§">web service</a> and the AS (and the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¦">device</a>)
and with userâs explicit approval.</p>
   </ol>
   <p>As mentioned above, the flow can be achieved by extending the UI and <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API, and supporting
the cipher suites for RPK <a data-link-type="biblio" href="#biblio-rfc7250">[RFC7250]</a>.</p>
   <h5 class="heading settled" data-level="5.2.2.3" id="requirements-3"><span class="secno">5.2.2.3. </span><span class="content">Browser Requirements</span><a class="self-link" href="#requirements-3"></a></h5>
   <p>The requirements for browsers can be summarized as follows:</p>
   <ul>
    <li data-md>
     <p>Support a TLS certificate type and extensions for using RPK.</p>
    <li data-md>
     <p>Support additional parameters of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API mentioned above to support RPK cipher suites for TLS
and distinguish <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â§">devices</a> which have the same private domain names.</p>
    <li data-md>
     <p>Implement the pop-up window shown above.</p>
    <li data-md>
     <p>Support a method to distinguish <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¤â¨">devices</a> which have the same names.</p>
   </ul>
   <h5 class="heading settled" data-level="5.2.2.4" id="dependency-3"><span class="secno">5.2.2.4. </span><span class="content">Dependency on other SDOs</span><a class="self-link" href="#dependency-3"></a></h5>
   <p>This approach will require work and collaboration with the IETF.</p>
   <ul>
    <li data-md>
     <p>HTTPS profile for ACE (or extensions for OAuth): Since ACE is based on CoAP/OSCORE,
it is necessary to define either a HTTPS profile for ACE or an extension to COAP/OSCORE
under the assumption that the RSs are distributed and deployed in <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ¦">local network</a>.</p>
   </ul>
   <h4 class="heading settled" data-level="5.2.3" id="approach-4"><span class="secno">5.2.3. </span><span class="content">APPROACH-4: Using Device Authority-Issued Certificate</span><a class="self-link" href="#approach-4"></a></h4>
   <p>In this approach, the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ¨">web service</a> trusts a vendor (device authority) issued private certificate
and asks the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¡â ">UA</a> to pin the certificate as a trusted one
(only in the web serviceâs secure context) based on user grant.
The trust can be built as an extension to <a href="#approach-3">Â§5.2.2 APPROACH-3: Using Application Layer Access Token</a> in which
AS has a <a data-link-type="dfn" href="#private-ca" id="ref-for-private-ca">private CA</a> role and the <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ âª">web service</a> trusts a <a data-link-type="dfn" href="#private-ca" id="ref-for-private-caâ ">private CA</a> issued certificate
based either on a pre-registered relationship with the CA and AS or by some other means.</p>
   <p>This approach can be realized by extending the browser API and related UI
in a similar way as shown in <a href="#approach-3">Â§5.2.2 APPROACH-3: Using Application Layer Access Token</a>. Specifically, by extending the <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API
as described below, it enables web services to provide the browsers with private CA
certificates or <a data-link-type="dfn" href="#private-ca" id="ref-for-private-caâ¡">private CA</a> issued certificates as trusted ones.</p>
   <div class="example" id="example-212ca612">
    <a class="self-link" href="#example-212ca612"></a> The following code is an example of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API extension to support this approach. 
<pre class="highlight">fetch<c- p>(</c-><c- u>"https://device.local/stuff"</c-><c- p>,</c-> <c- p>{</c->
  tlsExtension<c- o>:</c-> <c- p>{</c->
    <c- c1>// type of the TLS extension.</c->
    <c- c1>//     'pkix' might be a default value that can be omitted.</c->
    type<c- o>:</c-> <c- u>"pkix"</c-><c- p>,</c->
    <c- c1>// base64-encoded SPKI of the vendor CA cert or its fingerprint </c->
    pinnedIdentity<c- o>:</c-> <c- u>"8fwpbctkMAq2x73orFsOXMruxWnmFSyhXioQmclhJ5L="</c-><c- p>}});</c->
</pre>
   </div>
   <p>Similar to earlier approaches, the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¡â¡">UA</a> shows a following pop-up window
when the <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API above is called.</p>
   <div align="center"> <img src="figs/fig_sol_4_1.png" width="480px"> </div>
   <p>For this approach, we argue that the framework on which a device vendor
validates domain names of the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥âª">devices</a> and guarantees the authenticity
of them would be useful even if the names are local names.
A domain-validated certificate can be issued by using the OOB (Out-of-Band)
challenge as defined in the earlier draft of ACME(<a data-link-type="biblio" href="#biblio-acme-draft-8">[ACME-DRAFT-8]</a>).
This was also discussed in <a data-link-type="biblio" href="#biblio-tpac-2017-breakout-session">[TPAC-2017-breakout-session]</a>.</p>
   <p>The challenge, which is the access to âhttps://device.local/.well-known/acme-challenge/{token}â,
is executed by the ACME serverâs frontend loaded on a browser
that can communicate with the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â ">device</a> in a <a data-link-type="dfn" href="#local-network" id="ref-for-local-networkâ§">local network</a>.
Although the challenge through the <a data-link-type="dfn" href="#ua" id="ref-for-uaâ¡â¢">UA</a> has some advantages
(e.g., it can be based on a user grant, there is no need to change the firewall settings),
it requires a <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API extension for <a href="#approach-2">Â§5.2.1 APPROACH-2: Using Shared Secret</a> that enables the access to the device
based on self-signed certificates or RPKs.</p>
   <p>It is important to note that there are other industry efforts on similar concepts
as vendor-issued certificate (hereafter, <a data-link-type="dfn" href="#private-ca" id="ref-for-private-caâ¢">private CA</a> issued certificate).
For example, <a data-link-type="biblio" href="#biblio-ieee8021ar">[IEEE802.1AR]</a> defines IDevID and LDevID that are device identifiers
issued by the device manufacturers, and it seems that <a data-link-type="biblio" href="#biblio-pki-certificate-identifier-format-for-devices">[PKI-CERTIFICATE-IDENTIFIER-FORMAT-FOR-DEVICES]</a> tries to make the device identifiers
be available on the Web PKI. In addition, <a data-link-type="biblio" href="#biblio-ietf-anima-wg">[IETF-ANIMA-WG]</a> has discussed the way
to issue an LDevID autonomously based on an IDevID.
Therefore, we propose that the vendor-issued certificate should be regarded
as an accepted mechanism that should be leveraged by the W3C community.</p>
   <h5 class="heading settled" data-level="5.2.3.1" id="requirements-4"><span class="secno">5.2.3.1. </span><span class="content">Browser Requirements</span><a class="self-link" href="#requirements-4"></a></h5>
   <p>The requirements for browsers can be summarized as follows:</p>
   <ul>
    <li data-md>
     <p>Support additional parameters of <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> API mentioned above.</p>
    <li data-md>
     <p>Implement the pop-up window shown above.</p>
   </ul>
   <h5 class="heading settled" data-level="5.2.3.2" id="dependency-4"><span class="secno">5.2.3.2. </span><span class="content">Dependency on other SDOs</span><a class="self-link" href="#dependency-4"></a></h5>
   <p>This approach will require work and collaboration with the IETF.</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-pki-certificate-identifier-format-for-devices">[PKI-CERTIFICATE-IDENTIFIER-FORMAT-FOR-DEVICES]</a> is currently an individual submission yet.</p>
    <li data-md>
     <p>The ACME extension as described above.</p>
   </ul>
   <h3 class="heading settled" data-level="5.3" id="pros-cons"><span class="secno">5.3. </span><span class="content">Pros and Cons of the Approaches</span><a class="self-link" href="#pros-cons"></a></h3>
   <p class="note" role="note"><span>NOTE:</span> Write a table that shows relations between the requirements (REQ-x) and the approaches (APPROACH-x).</p>
   <h4 class="heading settled" data-level="5.3.1" id="proscons-1"><span class="secno">5.3.1. </span><span class="content">APPROACH-1</span><a class="self-link" href="#proscons-1"></a></h4>
   <h4 class="heading settled" data-level="5.3.2" id="proscons-2"><span class="secno">5.3.2. </span><span class="content">APPROACH-2</span><a class="self-link" href="#proscons-2"></a></h4>
   <ul>
    <li data-md>
     <p>Pros</p>
     <ul>
      <li data-md>
       <p>There is no need for manufactures to deploy and maintain
their own servers (AS and/or CA) on the internet.</p>
      <li data-md>
       <p>It is applicable to both access patterns use cases.</p>
      <li data-md>
       <p>There is no need to extend the Fetch API.</p>
     </ul>
    <li data-md>
     <p>Cons</p>
     <ul>
      <li data-md>
       <p>There is no trust anchor for web services to trust the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¡">devices</a> and their domain names.</p>
      <li data-md>
       <p>A user has to input a PIN /password, or a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¢">device</a> has to support
a secondary communication channel (e.g., BLE, NFC).</p>
      <li data-md>
       <p>Web browsers need to support PAKE-based cipher suites.</p>
     </ul>
   </ul>
   <h4 class="heading settled" data-level="5.3.3" id="proscons-3"><span class="secno">5.3.3. </span><span class="content">APPROACH-3</span><a class="self-link" href="#proscons-3"></a></h4>
   <ul>
    <li data-md>
     <p>Pros</p>
     <ul>
      <li data-md>
       <p>Web services can trust <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â£">devices</a> as far as they can trust AS for the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¤">devices</a>.</p>
      <li data-md>
       <p>If a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¥">device</a> can get <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ â ">web service</a> information from the AS,
the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¦">device</a> can configure proper CORS settings in advance.
It means that the approach would be familiar with the secure
local cross-origin access method described in <a data-link-type="biblio" href="#biblio-cors-and-rfc1918">[CORS-AND-RFC1918]</a>).</p>
      <li data-md>
       <p>The authenticity of <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â§">devices</a> can be enhanced when the AS authenticate <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¥â¨">devices</a> based on attestation keys in TPM on the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦âª">devices</a>.</p>
     </ul>
    <li data-md>
     <p>Cons</p>
     <ul>
      <li data-md>
       <p>Manufactures have to deploy and maintain their own servers (AS and/or CA).</p>
      <li data-md>
       <p>Fetch API needs to be extended.</p>
      <li data-md>
       <p>Device domain names are not validated.</p>
      <li data-md>
       <p>Another browser API (for example, which allows a <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ â¡">web service</a> to pin a certificate
in the context of a specific origin) would be needed to support the normal access pattern use case.</p>
     </ul>
   </ul>
   <h4 class="heading settled" data-level="5.3.4" id="proscons-4"><span class="secno">5.3.4. </span><span class="content">APPROACH-4</span><a class="self-link" href="#proscons-4"></a></h4>
   <ul>
    <li data-md>
     <p>Pros</p>
     <ul>
      <li data-md>
       <p>Web services can trust <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â ">devices</a> as far as they can trust <a data-link-type="dfn" href="#private-ca" id="ref-for-private-caâ£">private CAs</a> for the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â¡">devices</a>.</p>
      <li data-md>
       <p>Device domain names can be validated if ACME can be extended for local domain names.</p>
      <li data-md>
       <p>Existing PKI-based methods for managing the lifecycle of certificates can be used (e.g., CRL, OCSP).</p>
      <li data-md>
       <p>If a <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â¢">device</a> can get <a data-link-type="dfn" href="#web-service" id="ref-for-web-serviceâ â¢">web service</a> information from the AS which has a <a data-link-type="dfn" href="#private-ca" id="ref-for-private-caâ¤">private CA</a> role,
the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â£">device</a> can configure proper CORS settings in advance as with <a href="#approach-3">Â§5.2.2 APPROACH-3: Using Application Layer Access Token</a>.</p>
      <li data-md>
       <p>The authenticity of <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â¤">devices</a> can be enhanced when the CA issues certificates
for the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â¥">devices</a> based on attestation keys in TPM on the <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â¦">devices</a>.</p>
     </ul>
    <li data-md>
     <p>Cons</p>
     <ul>
      <li data-md>
       <p>Manufactures have to deploy and maintain their own servers (AS and/or private CA).</p>
      <li data-md>
       <p>Fetch API needs to be extended.</p>
      <li data-md>
       <p>Another browser API would be needed to support the normal access pattern use case.</p>
     </ul>
   </ul>
   <h2 class="heading settled" data-level="6" id="conclusion"><span class="secno">6. </span><span class="content">Conclusion</span><a class="self-link" href="#conclusion"></a></h2>
   <p>In this document, we introduced technical approaches to enable local HTTPS communications
from browsers to <a data-link-type="dfn" href="#device" id="ref-for-deviceâ¦â§">devices</a> that is not publicly accessible.
However, these approaches would require browser extensions and other protocol
standardization as identified. The motivation came from the industry need of providing
HTTPS access to IoT devices, majority of which will not have a global domain name
so that the domain name can be verified and a certificate can be issued.
We hope that this document will spur the discussions within the W3C community so that
a solution can be developed and standardized.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words âMUSTâ, âMUST NOTâ, âREQUIREDâ, âSHALLâ, âSHALL NOTâ, âSHOULDâ, âSHOULD NOTâ, âRECOMMENDEDâ, âMAYâ, and âOPTIONALâ
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words âfor exampleâ
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word âNoteâ
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">â</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">â</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">â</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Donât scroll to compensate for the ToC if weâre above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I donât know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldnât exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isnât standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we donât have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While weâre at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Canât find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#cross-origin-access-pattern">Cross-origin access pattern</a><span>, in Â§3.3</span>
   <li><a href="#device">device</a><span>, in Â§2</span>
   <li><a href="#local-network">local network</a><span>, in Â§2</span>
   <li><a href="#non-web-pki-certificate">non-Web PKI certificate</a><span>, in Â§2</span>
   <li><a href="#normal-access-pattern">Normal access pattern</a><span>, in Â§3.3</span>
   <li><a href="#private-ca">private CA</a><span>, in Â§2</span>
   <li><a href="#public-ca">public CA</a><span>, in Â§2</span>
   <li><a href="#ua">UA</a><span>, in Â§2</span>
   <li><a href="#web-pki-certificate">Web PKI certificate</a><span>, in Â§2</span>
   <li><a href="#web-service">web service</a><span>, in Â§2</span>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-acme-draft-8">[ACME-DRAFT-8]
   <dd><a href="https://tools.ietf.org/html/draft-ietf-acme-acme-8">Automatic Certificate Management Environment (ACME)</a>. URL: <a href="https://tools.ietf.org/html/draft-ietf-acme-acme-8">https://tools.ietf.org/html/draft-ietf-acme-acme-8</a>
   <dt id="biblio-better-tls">[BETTER-TLS]
   <dd><a href="https://medium.com/netflix-techblog/bettertls-c9915cd255c0">BetterTLS A Name Constraints test suite for HTTPS clients, created by Netflix</a>. URL: <a href="https://medium.com/netflix-techblog/bettertls-c9915cd255c0">https://medium.com/netflix-techblog/bettertls-c9915cd255c0</a>
   <dt id="biblio-cab-br">[CAB-BR]
   <dd><a href="https://cabforum.org/baseline-requirements-documents/">CA/BForum Baseline Requirement</a>. URL: <a href="https://cabforum.org/baseline-requirements-documents/">https://cabforum.org/baseline-requirements-documents/</a>
   <dt id="biblio-cabforum-guidance-deprecated-internal-names">[CABFORUM-GUIDANCE-DEPRECATED-INTERNAL-NAMES]
   <dd><a href="https://cabforum.org/wp-content/uploads/Guidance-Deprecated-Internal-Names.pdf">Internal Server Names and IP Address Requirements for SSL</a>. June 2012. URL: <a href="https://cabforum.org/wp-content/uploads/Guidance-Deprecated-Internal-Names.pdf">https://cabforum.org/wp-content/uploads/Guidance-Deprecated-Internal-Names.pdf</a>
   <dt id="biblio-cors-and-rfc1918">[CORS-AND-RFC1918]
   <dd><a href="https://wicg.github.io/cors-rfc1918/">CORS and RFC1918</a>. URL: <a href="https://wicg.github.io/cors-rfc1918/">https://wicg.github.io/cors-rfc1918/</a>
   <dt id="biblio-ec-jpake">[EC-JPAKE]
   <dd>R. Cragie; F. Hao. <a href="https://tools.ietf.org/html/draft-cragie-tls-ecjpake-01">Elliptic Curve J-PAKE Cipher Suites</a>. URL: <a href="https://tools.ietf.org/html/draft-cragie-tls-ecjpake-01">https://tools.ietf.org/html/draft-cragie-tls-ecjpake-01</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-https-for-local-domains">[HTTPS-FOR-LOCAL-DOMAINS]
   <dd><a href="https://docs.google.com/document/d/170rFC91jqvpFrKIqG4K8Vox8AL4LeQXzfikBQXYPmzU/edit?usp=shari">HTTPS for Local Domains</a>. URL: <a href="https://docs.google.com/document/d/170rFC91jqvpFrKIqG4K8Vox8AL4LeQXzfikBQXYPmzU/edit?usp=shari">https://docs.google.com/document/d/170rFC91jqvpFrKIqG4K8Vox8AL4LeQXzfikBQXYPmzU/edit?usp=shari</a>
   <dt id="biblio-httpslocal-usecases">[HTTPSLOCAL-USECASES]
   <dd><a href="https://httpslocal.github.io/usecases/">Use Cases and Requirements on HTTPS-enabled Local Network Servers</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/">https://httpslocal.github.io/usecases/</a>
   <dt id="biblio-ieee8021ar">[IEEE802.1AR]
   <dd><a href="https://1.ieee802.org/security/802-1ar/">802.1AR: Secure Device Identity</a>. URL: <a href="https://1.ieee802.org/security/802-1ar/">https://1.ieee802.org/security/802-1ar/</a>
   <dt id="biblio-ietf-ace-wg">[IETF-ACE-WG]
   <dd><a href="https://datatracker.ietf.org/wg/ace/about/">Authentication and Authorization for Constrained Environments (ace)</a>. URL: <a href="https://datatracker.ietf.org/wg/ace/about/">https://datatracker.ietf.org/wg/ace/about/</a>
   <dt id="biblio-ietf-anima-wg">[IETF-ANIMA-WG]
   <dd><a href="https://datatracker.ietf.org/wg/anima/about/">Autonomic Networking Integrated Model and Approach (anima)</a>. URL: <a href="https://datatracker.ietf.org/wg/anima/about/">https://datatracker.ietf.org/wg/anima/about/</a>
   <dt id="biblio-ietf-oauth-wg">[IETF-OAUTH-WG]
   <dd><a href="https://datatracker.ietf.org/wg/oauth/about/">Web Authorization Protocol (oauth)</a>. URL: <a href="https://datatracker.ietf.org/wg/oauth/about/">https://datatracker.ietf.org/wg/oauth/about/</a>
   <dt id="biblio-lets-encrypt">[LETS-ENCRYPT]
   <dd><a href="https://letsencrypt.org/">Let's Encrypt - Free SSL/TLS Certificates</a>. URL: <a href="https://letsencrypt.org/">https://letsencrypt.org/</a>
   <dt id="biblio-mbed-tls">[MBED-TLS]
   <dd><a href="https://www.mbed.com/en/technologies/security/mbed-tls/">Mbed TLS</a>. URL: <a href="https://www.mbed.com/en/technologies/security/mbed-tls/">https://www.mbed.com/en/technologies/security/mbed-tls/</a>
   <dt id="biblio-pake-with-tls13">[PAKE-WITH-TLS1.3]
   <dd>R. Barnes; O. Friel. <a href="https://tools.ietf.org/html/draft-barnes-tls-pake-04">Usage of PAKE with TLS 1.3</a>. URL: <a href="https://tools.ietf.org/html/draft-barnes-tls-pake-04">https://tools.ietf.org/html/draft-barnes-tls-pake-04</a>
   <dt id="biblio-pki-certificate-identifier-format-for-devices">[PKI-CERTIFICATE-IDENTIFIER-FORMAT-FOR-DEVICES]
   <dd><a href="https://tools.ietf.org/id/draft-friel-pki-for-devices-00.html">PKI Certificate Identifier Format for Devices</a>. URL: <a href="https://tools.ietf.org/id/draft-friel-pki-for-devices-00.html">https://tools.ietf.org/id/draft-friel-pki-for-devices-00.html</a>
   <dt id="biblio-plex">[PLEX]
   <dd><a href="https://blog.filippo.io/how-plex-is-doing-https-for-all-its-users/">How PLEX is doing HTTPS for all its users</a>. URL: <a href="https://blog.filippo.io/how-plex-is-doing-https-for-all-its-users/">https://blog.filippo.io/how-plex-is-doing-https-for-all-its-users/</a>
   <dt id="biblio-req-1">[REQ-1]
   <dd><a href="https://httpslocal.github.io/usecases/#req-1">REQ-1: Guarantee of Device Trustworthiness</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#req-1">https://httpslocal.github.io/usecases/#req-1</a>
   <dt id="biblio-rfc1122">[RFC1122]
   <dd>R. Braden, Ed.. <a href="https://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts - Communication Layers</a>. October 1989. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc1122">https://tools.ietf.org/html/rfc1122</a>
   <dt id="biblio-rfc1918">[RFC1918]
   <dd>Y. Rekhter; et al. <a href="https://tools.ietf.org/html/rfc1918">Address Allocation for Private Internets</a>. February 1996. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc1918">https://tools.ietf.org/html/rfc1918</a>
   <dt id="biblio-rfc3927">[RFC3927]
   <dd>S. Cheshire; B. Aboba; E. Guttman. <a href="https://tools.ietf.org/html/rfc3927">Dynamic Configuration of IPv4 Link-Local Addresses</a>. May 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3927">https://tools.ietf.org/html/rfc3927</a>
   <dt id="biblio-rfc4191">[RFC4191]
   <dd>R. Draves; D. Thaler. <a href="https://tools.ietf.org/html/rfc4191">Default Router Preferences and More-Specific Routes</a>. November 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4191">https://tools.ietf.org/html/rfc4191</a>
   <dt id="biblio-rfc4193">[RFC4193]
   <dd>R. Hinden; B. Haberman. <a href="https://tools.ietf.org/html/rfc4193">Unique Local IPv6 Unicast Addresses</a>. October 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4193">https://tools.ietf.org/html/rfc4193</a>
   <dt id="biblio-rfc6762">[RFC6762]
   <dd>S. Cheshire; M. Krochmal. <a href="https://tools.ietf.org/html/rfc6762">Multicast DNS</a>. February 2013. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6762">https://tools.ietf.org/html/rfc6762</a>
   <dt id="biblio-rfc7250">[RFC7250]
   <dd>P. Wouters, Ed.; et al. <a href="https://tools.ietf.org/html/rfc7250">Using Raw Public Keys in Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)</a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7250">https://tools.ietf.org/html/rfc7250</a>
   <dt id="biblio-rfc7664">[RFC7664]
   <dd>D. Harkins, Ed.. <a href="https://tools.ietf.org/html/rfc7664">Dragonfly Key Exchange</a>. November 2015. Informational. URL: <a href="https://tools.ietf.org/html/rfc7664">https://tools.ietf.org/html/rfc7664</a>
   <dt id="biblio-rfc8236">[RFC8236]
   <dd>F. Hao, Ed.. <a href="https://tools.ietf.org/html/rfc8236">J-PAKE: Password-Authenticated Key Exchange by Juggling</a>. September 2017. Informational. URL: <a href="https://tools.ietf.org/html/rfc8236">https://tools.ietf.org/html/rfc8236</a>
   <dt id="biblio-rfc8375">[RFC8375]
   <dd>P. Pfister; T. Lemon. <a href="https://tools.ietf.org/html/rfc8375">Special-Use Domain 'home.arpa.'</a>. May 2018. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc8375">https://tools.ietf.org/html/rfc8375</a>
   <dt id="biblio-rfc8492">[RFC8492]
   <dd>D. Harkins, Ed.. <a href="https://tools.ietf.org/html/rfc8492">Secure Password Ciphersuites for Transport Layer Security (TLS)</a>. February 2019. Informational. URL: <a href="https://tools.ietf.org/html/rfc8492">https://tools.ietf.org/html/rfc8492</a>
   <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
   <dd>Mike West. <a href="https://www.w3.org/TR/secure-contexts/">Secure Contexts</a>. 15 September 2016. CR. URL: <a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
   <dt id="biblio-spake2">[SPAKE2]
   <dd>W. Ladd; B. Kaduk. <a href="https://tools.ietf.org/html/draft-irtf-cfrg-spake2-08">SPAKE2, a PAKE</a>. URL: <a href="https://tools.ietf.org/html/draft-irtf-cfrg-spake2-08">https://tools.ietf.org/html/draft-irtf-cfrg-spake2-08</a>
   <dt id="biblio-tpac-2017-breakout-session">[TPAC-2017-breakout-session]
   <dd><a href="https://www.w3.org/wiki/File:TPAC2017_httpslocal-2.pdf">How can we provide the devices with valid certificates?</a>. URL: <a href="https://www.w3.org/wiki/File:TPAC2017_httpslocal-2.pdf">https://www.w3.org/wiki/File:TPAC2017_httpslocal-2.pdf</a>
   <dt id="biblio-uc-1">[UC-1]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-1">UC-1: Photo sharing between online services and home NAS devices</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-1">https://httpslocal.github.io/usecases/#uc-1</a>
   <dt id="biblio-uc-2">[UC-2]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-2">UC-2: Video streaming with cache storage in local network</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-2">https://httpslocal.github.io/usecases/#uc-2</a>
   <dt id="biblio-uc-3">[UC-3]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-3">UC-3: Web-based UI for home appliances (input/output constrained devices)</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-3">https://httpslocal.github.io/usecases/#uc-3</a>
   <dt id="biblio-uc-4">[UC-4]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-4">UC-4: Embedded system monitoring and controlling for display-capable devices</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-4">https://httpslocal.github.io/usecases/#uc-4</a>
   <dt id="biblio-uc-5">[UC-5]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-5">UC-5: Data analysis from analytical and measuring instruments in local network</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-5">https://httpslocal.github.io/usecases/#uc-5</a>
   <dt id="biblio-uc-6">[UC-6]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-6">UC-6: Secure offline communication for home automation</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-6">https://httpslocal.github.io/usecases/#uc-6</a>
   <dt id="biblio-uc-7">[UC-7]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-7">UC-7: Companion Device for Broadcast Interactive Service</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-7">https://httpslocal.github.io/usecases/#uc-7</a>
   <dt id="biblio-uc-8">[UC-8]
   <dd><a href="https://httpslocal.github.io/usecases/#uc-8">UC-8: Presenting with Projector at office</a>. September 2019. URL: <a href="https://httpslocal.github.io/usecases/#uc-8">https://httpslocal.github.io/usecases/#uc-8</a>
   <dt id="biblio-w3c-second-screen-wg">[W3C-SECOND-SCREEN-WG]
   <dd><a href="https://www.w3.org/2014/secondscreen/">W3C Second Screen WG</a>. URL: <a href="https://www.w3.org/2014/secondscreen/">https://www.w3.org/2014/secondscreen/</a>
   <dt id="biblio-webthings-gateway">[WEBTHINGS-GATEWAY]
   <dd><a href="https://iot.mozilla.org/gateway/">WebThings Gateway</a>. URL: <a href="https://iot.mozilla.org/gateway/">https://iot.mozilla.org/gateway/</a>
  </dl>
  <aside class="dfn-panel" data-for="local-network">
   <b><a href="#local-network">#local-network</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-local-network">2. Terminology</a> <a href="#ref-for-local-networkâ ">(2)</a> <a href="#ref-for-local-networkâ¡">(3)</a>
    <li><a href="#ref-for-local-networkâ¢">3.1. Target Devices</a>
    <li><a href="#ref-for-local-networkâ£">3.2. Target Local Networks</a> <a href="#ref-for-local-networkâ¤">(2)</a>
    <li><a href="#ref-for-local-networkâ¥">5. Technical Approaches</a>
    <li><a href="#ref-for-local-networkâ¦">5.2.2.4. Dependency on other SDOs</a>
    <li><a href="#ref-for-local-networkâ§">5.2.3. APPROACH-4: Using Device Authority-Issued Certificate</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ua">
   <b><a href="#ua">#ua</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ua">2. Terminology</a> <a href="#ref-for-uaâ ">(2)</a> <a href="#ref-for-uaâ¡">(3)</a> <a href="#ref-for-uaâ¢">(4)</a> <a href="#ref-for-uaâ£">(5)</a>
    <li><a href="#ref-for-uaâ¤">3.2. Target Local Networks</a>
    <li><a href="#ref-for-uaâ¥">3.3. Target Access Patterns</a> <a href="#ref-for-uaâ¦">(2)</a>
    <li><a href="#ref-for-uaâ§">4.1. Web PKI based Solutions</a>
    <li><a href="#ref-for-uaâ¨">4.2. Non-Web PKI based Solutions</a> <a href="#ref-for-uaâ âª">(2)</a>
    <li><a href="#ref-for-uaâ â ">5.2. Non-Web PKI based Approaches</a>
    <li><a href="#ref-for-uaâ â¡">5.2.1. APPROACH-2: Using Shared Secret</a>
    <li><a href="#ref-for-uaâ â¢">5.2.1.1. Device Access Flow</a> <a href="#ref-for-uaâ â£">(2)</a> <a href="#ref-for-uaâ â¤">(3)</a> <a href="#ref-for-uaâ â¥">(4)</a>
    <li><a href="#ref-for-uaâ â¦">5.2.2.2. Device Access Flow</a> <a href="#ref-for-uaâ â§">(2)</a> <a href="#ref-for-uaâ â¨">(3)</a> <a href="#ref-for-uaâ¡âª">(4)</a>
    <li><a href="#ref-for-uaâ¡â ">5.2.3. APPROACH-4: Using Device Authority-Issued Certificate</a> <a href="#ref-for-uaâ¡â¡">(2)</a> <a href="#ref-for-uaâ¡â¢">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="device">
   <b><a href="#device">#device</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-device">2. Terminology</a>
    <li><a href="#ref-for-deviceâ ">3.1. Target Devices</a> <a href="#ref-for-deviceâ¡">(2)</a> <a href="#ref-for-deviceâ¢">(3)</a>
    <li><a href="#ref-for-deviceâ£">3.3. Target Access Patterns</a> <a href="#ref-for-deviceâ¤">(2)</a> <a href="#ref-for-deviceâ¥">(3)</a> <a href="#ref-for-deviceâ¦">(4)</a>
    <li><a href="#ref-for-deviceâ§">4.1. Web PKI based Solutions</a> <a href="#ref-for-deviceâ¨">(2)</a> <a href="#ref-for-deviceâ âª">(3)</a> <a href="#ref-for-deviceâ â ">(4)</a>
    <li><a href="#ref-for-deviceâ â¡">5.1.1. APPROACH-1: Using technically Constrained Certificates</a> <a href="#ref-for-deviceâ â¢">(2)</a> <a href="#ref-for-deviceâ â£">(3)</a> <a href="#ref-for-deviceâ â¤">(4)</a> <a href="#ref-for-deviceâ â¥">(5)</a> <a href="#ref-for-deviceâ â¦">(6)</a> <a href="#ref-for-deviceâ â§">(7)</a>
    <li><a href="#ref-for-deviceâ â¨">5.1.1.1. Dependency on other SDOs</a> <a href="#ref-for-deviceâ¡âª">(2)</a> <a href="#ref-for-deviceâ¡â ">(3)</a>
    <li><a href="#ref-for-deviceâ¡â¡">5.2. Non-Web PKI based Approaches</a>
    <li><a href="#ref-for-deviceâ¡â¢">5.2.1. APPROACH-2: Using Shared Secret</a>
    <li><a href="#ref-for-deviceâ¡â£">5.2.1.1. Device Access Flow</a> <a href="#ref-for-deviceâ¡â¤">(2)</a> <a href="#ref-for-deviceâ¡â¥">(3)</a> <a href="#ref-for-deviceâ¡â¦">(4)</a> <a href="#ref-for-deviceâ¡â§">(5)</a> <a href="#ref-for-deviceâ¡â¨">(6)</a> <a href="#ref-for-deviceâ¢âª">(7)</a>
    <li><a href="#ref-for-deviceâ¢â ">5.2.1.2. Skipping user consent</a> <a href="#ref-for-deviceâ¢â¡">(2)</a> <a href="#ref-for-deviceâ¢â¢">(3)</a> <a href="#ref-for-deviceâ¢â£">(4)</a>
    <li><a href="#ref-for-deviceâ¢â¤">5.2.1.3. Browser Requirements</a> <a href="#ref-for-deviceâ¢â¥">(2)</a>
    <li><a href="#ref-for-deviceâ¢â¦">5.2.2. APPROACH-3: Using Application Layer Access Token</a> <a href="#ref-for-deviceâ¢â§">(2)</a> <a href="#ref-for-deviceâ¢â¨">(3)</a> <a href="#ref-for-deviceâ£âª">(4)</a> <a href="#ref-for-deviceâ£â ">(5)</a>
    <li><a href="#ref-for-deviceâ£â¡">5.2.2.1. Device Setup Flow</a> <a href="#ref-for-deviceâ£â¢">(2)</a> <a href="#ref-for-deviceâ£â£">(3)</a> <a href="#ref-for-deviceâ£â¤">(4)</a> <a href="#ref-for-deviceâ£â¥">(5)</a> <a href="#ref-for-deviceâ£â¦">(6)</a> <a href="#ref-for-deviceâ£â§">(7)</a> <a href="#ref-for-deviceâ£â¨">(8)</a> <a href="#ref-for-deviceâ¤âª">(9)</a>
    <li><a href="#ref-for-deviceâ¤â ">5.2.2.2. Device Access Flow</a> <a href="#ref-for-deviceâ¤â¡">(2)</a> <a href="#ref-for-deviceâ¤â¢">(3)</a> <a href="#ref-for-deviceâ¤â£">(4)</a> <a href="#ref-for-deviceâ¤â¤">(5)</a> <a href="#ref-for-deviceâ¤â¥">(6)</a> <a href="#ref-for-deviceâ¤â¦">(7)</a>
    <li><a href="#ref-for-deviceâ¤â§">5.2.2.3. Browser Requirements</a> <a href="#ref-for-deviceâ¤â¨">(2)</a>
    <li><a href="#ref-for-deviceâ¥âª">5.2.3. APPROACH-4: Using Device Authority-Issued Certificate</a> <a href="#ref-for-deviceâ¥â ">(2)</a>
    <li><a href="#ref-for-deviceâ¥â¡">5.3.2. APPROACH-2</a> <a href="#ref-for-deviceâ¥â¢">(2)</a>
    <li><a href="#ref-for-deviceâ¥â£">5.3.3. APPROACH-3</a> <a href="#ref-for-deviceâ¥â¤">(2)</a> <a href="#ref-for-deviceâ¥â¥">(3)</a> <a href="#ref-for-deviceâ¥â¦">(4)</a> <a href="#ref-for-deviceâ¥â§">(5)</a> <a href="#ref-for-deviceâ¥â¨">(6)</a> <a href="#ref-for-deviceâ¦âª">(7)</a>
    <li><a href="#ref-for-deviceâ¦â ">5.3.4. APPROACH-4</a> <a href="#ref-for-deviceâ¦â¡">(2)</a> <a href="#ref-for-deviceâ¦â¢">(3)</a> <a href="#ref-for-deviceâ¦â£">(4)</a> <a href="#ref-for-deviceâ¦â¤">(5)</a> <a href="#ref-for-deviceâ¦â¥">(6)</a> <a href="#ref-for-deviceâ¦â¦">(7)</a>
    <li><a href="#ref-for-deviceâ¦â§">6. Conclusion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="web-service">
   <b><a href="#web-service">#web-service</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-web-service">5.2.1.1. Device Access Flow</a>
    <li><a href="#ref-for-web-serviceâ ">5.2.2. APPROACH-3: Using Application Layer Access Token</a> <a href="#ref-for-web-serviceâ¡">(2)</a>
    <li><a href="#ref-for-web-serviceâ¢">5.2.2.1. Device Setup Flow</a>
    <li><a href="#ref-for-web-serviceâ£">5.2.2.2. Device Access Flow</a> <a href="#ref-for-web-serviceâ¤">(2)</a> <a href="#ref-for-web-serviceâ¥">(3)</a> <a href="#ref-for-web-serviceâ¦">(4)</a> <a href="#ref-for-web-serviceâ§">(5)</a>
    <li><a href="#ref-for-web-serviceâ¨">5.2.3. APPROACH-4: Using Device Authority-Issued Certificate</a> <a href="#ref-for-web-serviceâ âª">(2)</a>
    <li><a href="#ref-for-web-serviceâ â ">5.3.3. APPROACH-3</a> <a href="#ref-for-web-serviceâ â¡">(2)</a>
    <li><a href="#ref-for-web-serviceâ â¢">5.3.4. APPROACH-4</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="web-pki-certificate">
   <b><a href="#web-pki-certificate">#web-pki-certificate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-web-pki-certificate">2. Terminology</a>
    <li><a href="#ref-for-web-pki-certificateâ ">3.1. Target Devices</a>
    <li><a href="#ref-for-web-pki-certificateâ¡">4.1. Web PKI based Solutions</a>
    <li><a href="#ref-for-web-pki-certificateâ¢">5. Technical Approaches</a>
    <li><a href="#ref-for-web-pki-certificateâ£">5.1.1. APPROACH-1: Using technically Constrained Certificates</a> <a href="#ref-for-web-pki-certificateâ¤">(2)</a> <a href="#ref-for-web-pki-certificateâ¥">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="non-web-pki-certificate">
   <b><a href="#non-web-pki-certificate">#non-web-pki-certificate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-non-web-pki-certificate">2. Terminology</a>
    <li><a href="#ref-for-non-web-pki-certificateâ ">4.2. Non-Web PKI based Solutions</a> <a href="#ref-for-non-web-pki-certificateâ¡">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="public-ca">
   <b><a href="#public-ca">#public-ca</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-public-ca">4.1. Web PKI based Solutions</a> <a href="#ref-for-public-caâ ">(2)</a> <a href="#ref-for-public-caâ¡">(3)</a>
    <li><a href="#ref-for-public-caâ¢">5.1.1. APPROACH-1: Using technically Constrained Certificates</a> <a href="#ref-for-public-caâ£">(2)</a> <a href="#ref-for-public-caâ¤">(3)</a> <a href="#ref-for-public-caâ¥">(4)</a> <a href="#ref-for-public-caâ¦">(5)</a> <a href="#ref-for-public-caâ§">(6)</a> <a href="#ref-for-public-caâ¨">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="private-ca">
   <b><a href="#private-ca">#private-ca</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-private-ca">5.2.3. APPROACH-4: Using Device Authority-Issued Certificate</a> <a href="#ref-for-private-caâ ">(2)</a> <a href="#ref-for-private-caâ¡">(3)</a> <a href="#ref-for-private-caâ¢">(4)</a>
    <li><a href="#ref-for-private-caâ£">5.3.4. APPROACH-4</a> <a href="#ref-for-private-caâ¤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="normal-access-pattern">
   <b><a href="#normal-access-pattern">#normal-access-pattern</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-normal-access-pattern">5.2.1.1. Device Access Flow</a> <a href="#ref-for-normal-access-patternâ ">(2)</a>
    <li><a href="#ref-for-normal-access-patternâ¡">5.2.1.2. Skipping user consent</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cross-origin-access-pattern">
   <b><a href="#cross-origin-access-pattern">#cross-origin-access-pattern</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cross-origin-access-pattern">5.2.1.2. Skipping user consent</a>
    <li><a href="#ref-for-cross-origin-access-patternâ ">5.2.2.2. Device Access Flow</a> <a href="#ref-for-cross-origin-access-patternâ¡">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>